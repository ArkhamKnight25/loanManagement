model LoanApplication {
  id                String   @id @default(uuid())
  amount            Float
  purpose           String
  duration          Int
  employmentStatus  String?
  employerName      String?
  employerAddress   String?
  status            String   @default("PENDING")
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  userId            String
  user              User     @relation(fields: [userId], references: [id])
  verifierId        String?
  verifierComment   String?
  adminId           String?
  adminComment      String?
}

model User {
  id              String    @id @default(uuid())
  username        String
  email           String    @unique
  password        String
  role            String    @default("USER")
  profilePicture  String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  loans           Loan[]
  loanSubs        LoanSub[]
}

model Loan {
  id                String   @id @default(uuid())
  amount            Float
  term              Int      // Loan term in months
  purpose           String   // Reason for the loan
  employmentStatus  String
  employerName      String
  employerAddress   String
  status            String   @default("PENDING") // PENDING, VERIFIED, APPROVED, REJECTED
  verifierComment   String?
  adminComment      String?
  verifiedAt        DateTime?
  approvedAt        DateTime?
  rejectedAt        DateTime?
  verifierId        String?
  adminId           String?
  userId            String
  user              User     @relation(fields: [userId], references: [id])
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model Admin {
  id              String   @id @default(uuid())
  username        String   @unique
  email           String   @unique
  password        String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  createdBy       String?
}

model LoanSub {
  id                String   @id @default(uuid())
  amount            Float
  term              Int      // Loan term in months
  purpose           String   // Reason for the loan
  employmentStatus  String
  employerName      String
  employerAddress   String
  status            String   @default("PENDING") // PENDING, VERIFIED, APPROVED, REJECTED
  verifierComment   String?
  adminComment      String?
  verifiedAt        DateTime?
  approvedAt        DateTime?
  rejectedAt        DateTime?
  verifierId        String?
  adminId           String?
  userId            String
  user              User     @relation(fields: [userId], references: [id])
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
} 